{"version":3,"file":"notific-integrate.esm.js","sources":["../packages/notific-integrate/index.ts"],"sourcesContent":["/**\n * integrate - create a deeplink URL to the Notific Integrate page\n */\n\nexport type IntegratorConfig = {\n  name: string\n  canister_id: string\n  allowed_callbacks?: string[] | undefined\n  notify_callback?:\n    | {\n        principal: string\n        method: string\n      }\n    | undefined\n  secret?: string[] | undefined\n}\n\nfunction createUrl(config: IntegratorConfig): string {\n  const candidConfig = {\n    ...config,\n    allowed_callbacks: config.allowed_callbacks ?? [],\n    notify_callback: config.notify_callback ? [config.notify_callback] : [],\n    secret: config.secret ? [config.secret] : [],\n  }\n  const integrator = window.btoa(JSON.stringify(candidConfig))\n  const url = new URL(`https://notific.ooo/`)\n  url.searchParams.set(\"integrator\", integrator)\n  return url.toString()\n}\n\nexport { createUrl }\n"],"names":[],"mappings":"AAAA;;AAEG;AAeH,SAAS,SAAS,CAAC,MAAwB,EAAA;;IACzC,MAAM,YAAY,mCACb,MAAM,CAAA,EAAA,EACT,iBAAiB,EAAE,CAAA,EAAA,GAAA,MAAM,CAAC,iBAAiB,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,EAAE,EACjD,eAAe,EAAE,MAAM,CAAC,eAAe,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC,GAAG,EAAE,EACvE,MAAM,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,EAAA,CAC7C,CAAA;AACD,IAAA,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAA;AAC5D,IAAA,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,CAAA,oBAAA,CAAsB,CAAC,CAAA;IAC3C,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,YAAY,EAAE,UAAU,CAAC,CAAA;AAC9C,IAAA,OAAO,GAAG,CAAC,QAAQ,EAAE,CAAA;AACvB;;;;"}